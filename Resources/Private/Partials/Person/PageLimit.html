
<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">



<f:form.select name="ajaxPageLimit"  id="ajaxPageLimit"class="form-control">
    <f:form.select.option id="defaultLimit" value="{defaultLimit}">{defaultLimit}</f:form.select.option>
    <f:for each="{limits}" as="limit">
        <f:if condition="{defaultLimit}!={limit}">
            <f:form.select.option value="{limit}">{limit}</f:form.select.option>
        </f:if>
</f:for>
</f:form.select>
    <f:form.hidden name="uri_hidden" id="uri_hidden" value="<f:uri.action  action='ajaxList' />" /> 

</html>
    <script>

$(document).ready(function(){

    $('#ajaxPageLimit').change(function(){
        
        var val = $('#ajaxPageLimit').val();
        console.log($('.page-item.disabled'))
        const pageNumber= $('.page-item.disabled').find('#pageButton').val()
        console.log(pageNumber)
        var controllerpath = $("#uri_hidden").val();
       
        $.ajax({
            type:"POST",
            url: controllerpath,
            data:{'ajaxPageLimit':val, 'pageNumber':pageNumber},
            success:function(response) {
                $('[id=tr]').each(function(){
                $(this).fadeOut().promise().done(()=>{
                    $(this).remove()
                })
                }
                )
                $('.pagination').fadeOut().promise().done(()=>{
                    $(this).remove()
                })
                var pagination=$(response).find('#paginationContainer')
                $('#table').after(pagination)

            
                    $('#defaultLimit').val(val)
                    $('#defaultLimit').text(val)
                    var tableRows=$(response).find('#tr')
                    $('#trHeader').after(tableRows)
            
            }
        })

    })   

})





 </script>